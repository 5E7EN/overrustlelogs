<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
    <title>OverRustle Logs</title>
    <link rel="shortcut icon" type="image/x-icon" href="/assets/favicon.ico" />
    <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css" media="screen,projection" />
    <link rel="stylesheet" href="/assets/css/orl.css" />
    <script src="//code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
    <script src="/assets/js/orl.js"></script>
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-46946005-1']);
      _gaq.push(['_trackPageview']);

      (function () {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

      (function (b) { (function (a) { "__CF" in b && "DJS" in b.__CF ? b.__CF.DJS.push(a) : "addEventListener" in b ? b.addEventListener("load", a, !1) : b.attachEvent("onload", a) })(function () { "FB" in b && "Event" in FB && "subscribe" in FB.Event && (FB.Event.subscribe("edge.create", function (a) { _gaq.push(["_trackSocial", "facebook", "like", a]) }), FB.Event.subscribe("edge.remove", function (a) { _gaq.push(["_trackSocial", "facebook", "unlike", a]) }), FB.Event.subscribe("message.send", function (a) { _gaq.push(["_trackSocial", "facebook", "send", a]) })); "twttr" in b && "events" in twttr && "bind" in twttr.events && twttr.events.bind("tweet", function (a) { if (a) { var b; if (a.target && a.target.nodeName == "IFRAME") a: { if (a = a.target.src) { a = a.split("#")[0].match(/[^?=&]+=([^&]*)?/g); b = 0; for (var c; c = a[b]; ++b)if (c.indexOf("url") === 0) { b = unescape(c.split("=")[1]); break a } } b = void 0 } _gaq.push(["_trackSocial", "twitter", "tweet", b]) } }) }) })(window);
    </script>
    <script type="text/javascript">
      $(function () { $(".button-collapse").sideNav(); });
    </script>
    <script type="text/javascript">
      (function (path) {
        var selection = location.hash.match(/\#([0-9]+)-([0-9]+)/);
        path && orl.load(path, selection && [selection[1] >> 0, selection[2] >> 0]);
      })({{if isset(.Path)}}"{{.Path}}"{{end}})
    </script>
  </head>
  <body>
    <div class="navbar-fixed">
      <nav>
        <div class="row">
          <div class="col m1 l2 hide-on-med-and-down"></div>
          <div class="nav-wrapper col s12 m10 l8">
            <span>
              <a class="brand-logo" href="/">OverRustleLogs</a>
            </span>
            <ul id="nav-mobile" class="right hide-on-med-and-down">
              <li>
                <a class="active deep-orange donate" href="https://www.patreon.com/overrustlelogs" target="_blank">Become a Patron!</a>
              </li>
              <li>
                <a class="active" href="/stalk">Stalk</a>
              </li>
              <li>
                <a class="active" href="/changelog">Changelog</a>
              </li>
              <li>
                <a class="active" href="/contact">Contact</a>
              </li>
              <li>
                <a class="donate active deep-orange" target="_blank" href="https://twitch.streamlabs.com/overrustlelogs">
                  <i class="fa fa-paypal fa-fw" aria-hidden="true"></i> Donate
                </a>
              </li>
            </ul>
          </div>
          <div class="col m1 l2 hide-on-med-and-down"></div>
        </div>
      </nav>
    </div>
    <main>
      {{yield body()}}
    </main>
    <footer class="page-footer">
    {{if isset(.Month) && .Month != ""}}
      <div class="container footer-pad">
        <div class="row no-margin">
          <div class="col s10 m10 l7 hide-on-med-and-down">
              <svg width="1100" height="200"></svg>
              <script src="https://d3js.org/d3.v4.min.js"></script>
              <script>

              var svg = d3.select("svg"),
                  margin = {top: 20, right: 20, bottom: 30, left: 50},
                  width = +svg.attr("width") - margin.left - margin.right,
                  height = +svg.attr("height") - margin.top - margin.bottom,
                  g = svg.append("g").attr("transform", "translate(" + margin.left + "," + margin.top + ")");

              var parseTime = d3.timeParse("%d-%b-%y");

              var x = d3.scaleTime()
                  .rangeRound([0, width]);

              var y = d3.scaleLinear()
                  .rangeRound([height, 0]);
                  d3.interpolate('basis')
              var line = d3.line()
              .curve(d3.curveMonotoneX)
                  .x(function(d) { return x(new Date(d.date)); })
                  .y(function(d) { return y(d.lines); });

              d3.json("/api/v1/{{.Channel}}/{{.Month}}/lines.json", function(d) {
                x.domain(d3.extent(d.data, function(day) { return new Date(day.date); }));
                y.domain(d3.extent(d.data, function(day) { return day.lines; }));
                
                g.append("g")
                    .attr("transform", "translate(0," + height + ")")
                    .call(d3.axisBottom(x))
                  .select(".domain")
                    .remove();

                g.append("g")
                    .call(d3.axisLeft(y))
                  .append("text")
                    .attr("fill", "#fff")
                    .attr("transform", "rotate(-90)")
                    .attr("y", 6)
                    .attr("dy", "0.71em")
                    .attr("text-anchor", "end")
                    .text("Lines");

                g.append("path")
                    .datum(d.data)
                    .attr("fill", "none")
                    .attr("stroke", "#ff5722")
                    .attr("stroke-linejoin", "round")
                    .attr("stroke-linecap", "round")
                    .attr("stroke-width", 1.5)
                    .attr("d", line);
              });

              </script>
          </div>
          <div class="col l1 m2 s3 offset-l4">
            <ul class="right-align">
              <li class="link-pad"><a class="grey-text text-lighten-3" href="/changelog">Changelog</a></li>
              <li class="link-pad"><a class="grey-text text-lighten-3" href="/contact">Contact</a></li>
              <li class="link-pad"><a class="grey-text text-lighten-3" href="https://twitch.streamlabs.com/overrustlelogs">Donate</a></li>
              <li class="link-pad"><a class="grey-text text-lighten-3" href="https://www.patreon.com/overrustlelogs">Patreon</a></li>
            </ul>
          </div>
        </div>
      </div>
    {{end}}
      <div class="footer-copyright">
        <div class="container copyright-pad">
          Â© 2017 Copyright Overrustlelogs
        <a class="grey-text text-lighten-4 right" href="https://github.com/slugalisk/overrustlelogs">
          <span>
            <i class="fa fa-github fa-fw"></i>
          </span>
          GitHub
        </a>
        </div>
      </div>
    </footer>
    <script src="//cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
    <script src="//use.fontawesome.com/5fd85f0c6d.js"></script>
  </body>
</html>